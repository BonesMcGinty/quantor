<!DOCTYPE html>
<html>

<!--
_______                     _____              
__  __ \___  _______ _________  /______________
_  / / /  / / /  __ `/_  __ \  __/  __ \_  ___/
/ /_/ // /_/ // /_/ /_  / / / /_ / /_/ /  /    
\___\_\\__,_/ \__,_/ /_/ /_/\__/ \____//_/     

-->

<head>
  <meta charset="utf-8">
  <title>{{title}}</title>
  <meta name="author" content="Jason Rametta">
  <meta name="description" content="{{description}}">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css" integrity="sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO" crossorigin="anonymous">

  <style>
    html, body {
      height: 100%;
      scroll-behavior: smooth;
    }
    a {
      transition: color 0.2s;
    }
    a:hover {
      animation: zomg 3s infinite;
      text-decoration: none;
    }
    .page {
      min-height: 100%;
      display: -webkit-box; 
      display: -moz-box;
      display: -ms-flexbox;
      display: -webkit-flex; 
      display: flex;
      flex-direction: column;
      -webkit-box-orient: vertical;
    }
    .content {
      display: -webkit-box; 
      display: -moz-box;
      display: -ms-flexbox;
      display: -webkit-flex; 
      display: flex;
      flex-direction: column;
      -webkit-box-orient: vertical;
      -webkit-box-flex: 1;
      -moz-box-flex: 1;
      -webkit-flex: 1;
      -ms-flex: 1;
      flex: 1;
    }
    .github {
      height: 24px;
      opacity: .7;
    }
    .github:hover {
      opacity: 1;
    }
    .first-col {
      width: 30%;
    }
    .sticky-sidebar {
      position: -webkit-sticky;
      position: sticky;
      top: 72px;
      z-index: 1020;
    }
    .bg-quantor {
      background-image: radial-gradient( circle farthest-corner at 12.3% 19.3%,  rgba(85,88,218,1) 0%, rgba(95,209,249,1) 100.2% );
    }
    .progress-container {
      width: 100%;
      height: 4px;
      background: transparent;
      z-index: 1021;
    }
    .progress-bar {
      height: 4px;
      background: radial-gradient( circle farthest-corner at 12.3% 19.3%,  rgba(85,88,218,1) 0%, rgba(95,209,249,1) 100.2% );
      width: 0%;
    }
    .accordion-item {
      max-height: 0;
      overflow: hidden;
      transition: max-height 0.2s ease-out;
    }
    .returns {
      overflow-y: auto;
      max-height: 350px;
      background: rgba(0,0,0,.03);
      border: 1px solid #dee2e6;
    }
    .card-anchor {
      position: relative;
      top: -110px;
    }
    .endpoints {
      max-height: calc(100vh - 130px);
      overflow-y: auto;
    }
    @keyframes zomg {
      0%,
      100% {
        color: #7ccdea;
      }
      16% {
        color: #0074d9;
      }
      32% {
        color: #2ecc40;
      }
      48% {
        color: #ffdc00;
      }
      64% {
        color: #b10dc9;
      }
      80% {
        color: #ff4136;
      }
    }
  </style>

</head>

<body>

  <div class="page">
    <nav class="navbar bg-quantor sticky-top">
      <span class="navbar-brand text-white">{{title}}</span>
      <span class="navbar-text ml-auto">
        <a title="Quantor Github" target="_blank" href="https://github.com/rametta/quantor">
          <img alt="github logo" src="https://raw.githubusercontent.com/rametta/quantor/master/assets/github.png" class="github" />
        </a>
      </span>
    </nav>

    <div class="progress-container position-fixed">
      <div class="progress-bar" id="quantor-bar"></div>
    </div> 

    <div class="container-fluid content">
      <div class="row">
        <div class="col-md-3 d-none d-md-block">

          <div class="my-3 sticky-sidebar">
            <div class="text-muted">Endpoints</div>

            <div class="list-group my-3 endpoints shadow">
              {{#endpoints}}
                <a href="#{{name}}" class="list-group-item list-group-item-action">
                  <div class="d-flex justify-content-between">
                    <div>{{display}}</div>
                    <div class="d-flex align-items-center">
                    {{#handlers}}
                      {{#get}}<span class="badge badge-primary rounded-0">G</span>{{/get}}
                      {{#post}}<span class="badge badge-success rounded-0">P</span>{{/post}}
                      {{#put}}<span class="badge badge-warning rounded-0">P</span>{{/put}}
                      {{#delete}}<span class="badge badge-danger rounded-0">D</span>{{/delete}}
                      {{#head}}<span class="badge badge-dark rounded-0">H</span>{{/head}}
                      {{#options}}<span class="badge badge-dark rounded-0">O</span>{{/options}}
                      {{#patch}}<span class="badge badge-dark rounded-0">P</span>{{/patch}}
                    {{/handlers}}
                    </div>
                  </div>
                </a>
              {{/endpoints}}
            </div>
          </div>

        </div>
        <div class="col-md-9 col-sm-12 col-xs-12">

          <div class="text-muted my-3">{{description}}</div>

          {{#endpoints}}
          <div class="card my-3 shadow">
            <span id="{{name}}" class="card-anchor"></span>
            <div class="card-header">
              {{display}} | <a href="{{base}}{{name}}" target="_blank" title="{{display}}">{{name}}</a>
            </div>
            <div class="card-body">
              <p class="card-text">{{description}}</p>

              {{#handlers}}

                {{#get}}
                <div>
                  <span class="badge badge-primary">GET</span> 
                </div>
                {{/get}}

                {{#post}}
                <div>
                  <span class="badge badge-success">POST</span>
                </div>
                {{/post}}

                {{#put}}
                <div>
                  <span class="badge badge-warning">PUT</span>
                </div>
                {{/put}}

                {{#delete}}
                <div>
                  <span class="badge badge-danger">DELETE</span>
                </div>
                {{/delete}}

                {{#head}}
                <div>
                  <span class="badge badge-dark">HEAD</span>
                </div>
                {{/head}}

                {{#options}}
                <div>
                  <span class="badge badge-dark">OPTIONS</span>
                </div>
                {{/options}}

                {{#patch}}
                <div>
                  <span class="badge badge-dark">PATCH</span>
                </div>
                {{/patch}}

                {{#queryParams}}
                <small>Query Params</small>
                <div class="table-responsive">
                  <table class="table table-sm">
                    <tbody>
                    {{#requiredQueryParams}}
                      <tr>
                        <td class="first-col" nowrap scope="row">* <strong>{{name}}</strong> <small><span class="badge badge-secondary">{{type}}</span></small></td>
                        <td class="text-muted">
                          {{#info}}{{info}}{{/info}}
                          {{^info}}-{{/info}}
                        </td>
                      </tr>
                    {{/requiredQueryParams}}
                    {{#optionalQueryParams}}
                      <tr>
                        <td class="first-col" nowrap scope="row"><strong>{{name}}</strong> <small><span class="badge badge-secondary">{{type}}</span></small></td>
                        <td class="text-muted">
                          {{#info}}{{info}}{{/info}}
                          {{^info}}-{{/info}}
                        </td>
                      </tr>
                    {{/optionalQueryParams}}
                    </tbody>
                  </table>
                </div>
                {{/queryParams}}

                {{#bodyParams}}
                <small>Body Params</small>
                <div class="table-responsive">
                  <table class="table table-sm">
                    <tbody>
                    {{#requiredBodyParams}}
                      <tr>
                        <td class="first-col" nowrap scope="row">* <strong>{{name}}</strong> <small><span class="badge badge-secondary">{{type}}</span></small></td>
                        <td class="text-muted">
                          {{#info}}{{info}}{{/info}}
                          {{^info}}-{{/info}}
                        </td>
                      </tr>
                    {{/requiredBodyParams}}
                    {{#optionalBodyParams}}
                      <tr>
                        <td class="first-col" nowrap scope="row"><strong>{{name}}</strong> <small><span class="badge badge-secondary">{{type}}</span></small></td>
                        <td class="text-muted">
                          {{#info}}{{info}}{{/info}}
                          {{^info}}-{{/info}}
                        </td>
                      </tr>
                    {{/optionalBodyParams}}
                    </tbody>
                  </table>
                </div>
                {{/bodyParams}}

                {{#headers}}
                <small>Headers</small>
                <div class="table-responsive">
                  <table class="table table-sm">
                    <tbody>
                    {{#requiredHeaders}}
                      <tr>
                        <td class="first-col" nowrap scope="row">* <strong>{{name}}</strong> <small><span class="badge badge-secondary">{{type}}</span></small></td>
                        <td class="text-muted">
                          {{#info}}{{info}}{{/info}}
                          {{^info}}-{{/info}}
                        </td>
                      </tr>
                    {{/requiredHeaders}}
                    {{#optionalHeaders}}
                      <tr>
                        <td class="first-col" nowrap scope="row"><strong>{{name}}</strong> <small><span class="badge badge-secondary">{{type}}</span></small></td>
                        <td class="text-muted">
                          {{#info}}{{info}}{{/info}}
                          {{^info}}-{{/info}}
                        </td>
                      </tr>
                    {{/optionalHeaders}}
                    </tbody>
                  </table>
                </div>
                {{/headers}}

                {{#hasResponses}}
                <button type="button" class="btn btn-sm btn-outline-secondary toggle-accordion mb-3">Responses</button>

                <div class="accordion-item">
                  <div class="mb-3">
                    {{#responses}}
                    <div class="mb-1">
                      <span class="badge badge-secondary">{{code}}</span>
                    </div>
<pre class="returns p-1"><code>{{model}}</code></pre>
                    {{/responses}}
                  </div>
                </div>
                {{/hasResponses}}

              {{/handlers}}

            </div> <!-- .card-body -->
          </div> <!-- .card -->
          {{/endpoints}}

          {{^endpoints}}
          <div class="alert alert-danger" role="alert">
            <strong>Uh oh!</strong> There are no endpoints provided
          </div>
          {{/endpoints}}

        </div>
      </div>
    </div>

    <nav class="navbar navbar-dark bg-quantor">
      <div class="text-center w-100">
        <a class="text-white" href="https://www.npmjs.com/package/quantor" target="_blank">Powered with ❤️️ by the Quantor Engine</a>
      </div>
    </nav>
  </div>

</body>

<script>
window.onscroll = updateScrollerBar
window.onload = checkHash

// Progress bar updating
function updateScrollerBar() {
  var winScroll = document.body.scrollTop || document.documentElement.scrollTop;
  var height = document.documentElement.scrollHeight - document.documentElement.clientHeight;
  var scrolled = (winScroll / height) * 100;
  document.getElementById("quantor-bar").style.width = scrolled + "%";
}

// Check hash param to scroll into view
function checkHash() {
  var hash = location.hash.replace('#','');
  if (!hash) return
  var elem = document.getElementById(hash)
  if (!elem) return
  window.scrollTo(0, elem.getBoundingClientRect().top + pageYOffset)
}

// Accordion toggling
document
  .querySelectorAll(".toggle-accordion")
  .forEach(function(acc) {
    acc.addEventListener("click", function() {
      this.classList.toggle("active");
      var panel = this.nextElementSibling;
      if (panel.style.maxHeight){
        panel.style.maxHeight = null;
      } else {
        panel.style.maxHeight = panel.scrollHeight + "px";
      } 
    });
  })
</script>

</html>